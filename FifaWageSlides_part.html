<!DOCTYPE html>
<html lang="en"><head>
<script src="FifaWageSlides_part_files/libs/clipboard/clipboard.min.js"></script>
<script src="FifaWageSlides_part_files/libs/quarto-html/tabby.min.js"></script>
<script src="FifaWageSlides_part_files/libs/quarto-html/popper.min.js"></script>
<script src="FifaWageSlides_part_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="FifaWageSlides_part_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="FifaWageSlides_part_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="FifaWageSlides_part_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.2.313">

  <meta name="author" content="Shyam Shankar Hemachandran Rani">
  <title>Quarto</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="FifaWageSlides_part_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="FifaWageSlides_part_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="FifaWageSlides_part_files/libs/revealjs/dist/theme/quarto.css" id="theme">
  <link rel="stylesheet" href="styles.css">
  <link href="FifaWageSlides_part_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="FifaWageSlides_part_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="FifaWageSlides_part_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="FifaWageSlides_part_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="FifaWageSlides_part_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="FifaWageSlides_part_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-captioned.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-captioned) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-captioned.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-captioned .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-captioned .callout-caption  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-captioned.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-captioned.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-caption {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-caption {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-caption {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-captioned .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-captioned .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-captioned) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-caption {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-caption {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-caption {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-caption {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-caption {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  
  <script src="FifaWageSlides_part_files/libs/kePrint-0.0.1/kePrint.js"></script>
  <link href="FifaWageSlides_part_files/libs/lightable-0.0.1/lightable.css" rel="stylesheet">
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-image="presentation_files/Blue-Effect-Powerpoint-Backgrounds1.jpg" data-background-opacity="0.5" class="quarto-title-block center">
  <h1 class="title"><b class="titlepage-quarto">Quarto</b></h1>
  <p class="subtitle"><b>Analysis and Prediction of Wage in FIFA 18-22 dataset</b></p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Shyam Shankar Hemachandran Rani 
</div>
</div>
</div>

  <p class="date">1/20/23</p>
</section>
<section id="quarto" class="title-slide slide level1 center" data-auto-animate="true">
<h1 data-id="quarto-animate-title">Quarto</h1>
<div class="fragment fade-left">
<p>Open-source publishing system</p>
</div>
<div class="fragment fade-left">
<p>Publish high-quality articles, reports, presentations, websites, blogs and books.</p>
</div>
</section>

<section id="quarto-1" class="title-slide slide level1 center" data-auto-animate="true">
<h1 data-id="quarto-animate-title">Quarto</h1>
<div class="columns">
<div class="column" style="width:45%;">
<p>Author documents as plain text markdown or Jupyter notebooks.</p>
</div><div class="column" style="width:10%;">
<p><img data-src="presentation_files/Arrow-PNG-Clipart.png"></p>
</div><div class="column" style="width:45%;">
<p>Publish high-quality articles, reports, presentations, websites, blogs and books.</p>
</div>
</div>
</section>

<section id="quarto-2" class="title-slide slide level1 center" data-auto-animate="true">
<h1 data-id="quarto-animate-title"><b class="innerpage-quarto">Quarto</b></h1>
<div class="columns">
<div class="column" style="width:45%;">
<p>Author documents as plain text markdown or Jupyter notebooks.</p>
</div><div class="column" style="width:10%;">
<p><img data-src="presentation_files/Arrow-PNG-Clipart.png"></p>
</div><div class="column" style="width:45%;">
<p>Publish high-quality articles, reports, presentations, websites, blogs and books.</p>
</div>
</div>
<div class="callout callout-tip callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Did you realize?</strong></p>
</div>
<div class="callout-content">
<p>This presentation was also made using Quarto + Reveal.js</p>
</div>
</div>
</div>
</section>

<section id="quarto-3" class="title-slide slide level1 center" data-auto-animate="true">
<h1 data-id="quarto-animate-title">Quarto</h1>
<p>Create Dynamic Content</p>
</section>

<section>
<section id="quarto-4" class="title-slide slide level1 center" data-auto-animate="true">
<h1 data-id="quarto-animate-title">Quarto</h1>
<p>Create Dynamic Content</p>
<div class="columns">
<div class="column" style="width:30%;">
<p><img data-src="presentation_files/Python-logo.png"></p>
</div><div class="column" style="width:30%;">
<p><img data-src="presentation_files/R_logo.png"></p>
</div><div class="column" style="width:30%;">
<p><img data-src="presentation_files/Julia_Programming_Language_Logo.png"></p>
</div>
</div>
</section>
<section id="dynamic-report-generation" class="slide level2">
<h2>Dynamic Report Generation</h2>
<h3 id="with-quarto-r">With Quarto + R</h3>
<div class="columns">
<div class="column" style="width:60%;">
<div class="fragment fade-right">
<p><br><br><br><span style="font-size:3.5rem;">Data Analysis and Prediction of Wage of FIFA players</span></p>
</div>
</div><div class="column" style="width:40%;">
<div class="fragment fade-left">
<p><img data-src="presentation_files/football.png"></p>
</div>
</div>
</div>
</section></section>
<section>
<section id="the-dataset" class="title-slide slide level1 center">
<h1>The Dataset</h1>
<div class="columns">
<div class="column" style="width:60%;">
<p>We will be working with <a href="https://www.kaggle.com/datasets/stefanoleone992/fifa-22-complete-player-dataset">FIFA 22 complete player dataset</a> from Kaggle. Our focus will be on modelling the dependence of player’s wage on attributes like age, reputation, etc. and predict the wage of some players on out-of-sample data.</p>
</div><div class="column" style="width:40%;">
<div id="fig-fifa22" class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/fifa-22.jpg"></p>
<p></p><figcaption>Figure&nbsp;1: EA SPORTS FIFA 22</figcaption><p></p>
</figure>
</div>
<div class="callout callout-note callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>We will be using the FIFA player dataset from the years 2018 till 2022.</p>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="loading-packages-reading-data" class="slide level2">
<h2>Loading Packages &amp; Reading Data</h2>
<p><span style="font-size: 2rem">As the first step, we will set a seed. This will ensure reproducibility of the stochastic processes happening in the analysis (like random sampling).</span></p>
<div class="fragment fade-left">
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">set.seed</span>(<span class="dv">101</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment fade-up small-size-1">
<div class="cell">
<div class="cell-output-display">

<table class=" lightable-material lightable-striped lightable-hover" style="font-family: &quot;Source Sans Pro&quot;, helvetica, sans-serif; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:right;"> fifa_version </th>
   <th style="text-align:right;"> value_eur </th>
   <th style="text-align:right;"> wage_eur </th>
   <th style="text-align:right;"> age </th>
   <th style="text-align:right;"> height_cm </th>
   <th style="text-align:right;"> weight_kg </th>
   <th style="text-align:left;"> league_name </th>
   <th style="text-align:right;"> club_contract_valid_until </th>
   <th style="text-align:left;"> club_joined </th>
   <th style="text-align:left;"> preferred_foot </th>
   <th style="text-align:right;"> international_reputation </th>
   <th style="text-align:left;"> work_rate </th>
   <th style="text-align:left;"> body_type </th>
   <th style="text-align:right;"> release_clause_eur </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 18 </td>
   <td style="text-align:right;"> 9.55e+07 </td>
   <td style="text-align:right;"> 575000 </td>
   <td style="text-align:right;"> 32 </td>
   <td style="text-align:right;"> 185 </td>
   <td style="text-align:right;"> 80 </td>
   <td style="text-align:left;"> Spain Primera Division </td>
   <td style="text-align:right;"> 2021 </td>
   <td style="text-align:left;"> 2009-07-01 </td>
   <td style="text-align:left;"> Right </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:left;"> High/Low </td>
   <td style="text-align:left;"> Unique </td>
   <td style="text-align:right;"> 195800000 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 18 </td>
   <td style="text-align:right;"> 1.05e+08 </td>
   <td style="text-align:right;"> 575000 </td>
   <td style="text-align:right;"> 30 </td>
   <td style="text-align:right;"> 170 </td>
   <td style="text-align:right;"> 72 </td>
   <td style="text-align:left;"> Spain Primera Division </td>
   <td style="text-align:right;"> 2018 </td>
   <td style="text-align:left;"> 2004-07-01 </td>
   <td style="text-align:left;"> Left </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:left;"> Medium/Medium </td>
   <td style="text-align:left;"> Unique </td>
   <td style="text-align:right;"> 215300000 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 18 </td>
   <td style="text-align:right;"> 6.10e+07 </td>
   <td style="text-align:right;"> 225000 </td>
   <td style="text-align:right;"> 31 </td>
   <td style="text-align:right;"> 193 </td>
   <td style="text-align:right;"> 92 </td>
   <td style="text-align:left;"> German 1. Bundesliga </td>
   <td style="text-align:right;"> 2021 </td>
   <td style="text-align:left;"> 2011-07-01 </td>
   <td style="text-align:left;"> Right </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:left;"> Medium/Medium </td>
   <td style="text-align:left;"> Normal (185+) </td>
   <td style="text-align:right;"> 100700000 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 18 </td>
   <td style="text-align:right;"> 9.70e+07 </td>
   <td style="text-align:right;"> 500000 </td>
   <td style="text-align:right;"> 30 </td>
   <td style="text-align:right;"> 182 </td>
   <td style="text-align:right;"> 86 </td>
   <td style="text-align:left;"> Spain Primera Division </td>
   <td style="text-align:right;"> 2021 </td>
   <td style="text-align:left;"> 2014-07-11 </td>
   <td style="text-align:left;"> Right </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:left;"> High/Medium </td>
   <td style="text-align:left;"> Normal (170-185) </td>
   <td style="text-align:right;"> 198900000 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 18 </td>
   <td style="text-align:right;"> 1.23e+08 </td>
   <td style="text-align:right;"> 275000 </td>
   <td style="text-align:right;"> 25 </td>
   <td style="text-align:right;"> 175 </td>
   <td style="text-align:right;"> 68 </td>
   <td style="text-align:left;"> French Ligue 1 </td>
   <td style="text-align:right;"> 2022 </td>
   <td style="text-align:left;"> 2017-08-03 </td>
   <td style="text-align:left;"> Right </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:left;"> High/Medium </td>
   <td style="text-align:left;"> Unique </td>
   <td style="text-align:right;"> 236800000 </td>
  </tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="data-cleaning" class="slide level2 small-size-2">
<h2>Data Cleaning</h2>
<p>The dataframe has 92705 rows, comprising players from 57 leagues. We will select the top 7 leagues according to <a href="https://sportzpoint.com/football/top-7-football-leagues-by-uefa-rankings/">UEFA rankings</a>. The following are the top 7 leagues:</p>
<div class="columns">
<div class="column" style="width:60%;">
<div class="fragment fade-right">
<ul>
<li>Premier League | England</li>
<li>La Liga | Spain</li>
<li>Serie A | Italy</li>
<li>Bundesliga | Germany</li>
<li>Primeira Liga | Portugal</li>
<li>Ligue 1 | France</li>
<li>Eredivisie | Netherlands</li>
</ul>
</div>
</div><div class="column" style="width:40%;">
<div class="fragment fade-left">
<p><img data-src="presentation_files/Flags.jpg"></p>
</div>
</div>
</div>
<div class="cell">

</div>
</section></section>
<section>
<section id="exploratory-data-analysis" class="title-slide slide level1 center">
<h1>Exploratory Data Analysis</h1>

</section>
<section id="missing-data-analysis" class="slide level2 small-size-2">
<h2>Missing Data Analysis</h2>
<p>We can find out the columns which have missing values, with the code snippet below:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>miss_cols <span class="ot">&lt;-</span> <span class="fu">names</span>(<span class="fu">which</span>(<span class="fu">colSums</span>(<span class="fu">is.na</span>(player_df)) <span class="sc">&gt;</span> <span class="dv">0</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The following columns have missing values: <b>value_eur, release_clause_eur</b></p>
<div class="fragment fade-up">
<div class="columns">
<div class="column" style="width:50%;">
<p><span style="font-size:1.5rem;">The count of missing values compared to the total number of rows:</span></p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
  fifa_version release_clause_na value_na row_count
         &lt;int&gt;             &lt;int&gt;    &lt;int&gt;     &lt;int&gt;
1           18               286        1      3949
2           19               220        1      3959
3           20               203        2      4018
4           21               166        2      4068
5           22               302        0      3973</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<p><span style="font-size:1.5rem;">We can visualize the missing values in the following plot:</span></p>
<div class="cell">
<div class="cell-output-display">
<p><img data-src="FifaWageSlides_part_files/figure-revealjs/unnamed-chunk-5-1.png" width="960"></p>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="missing-value-imputation" class="slide level2 smaller">
<h2>Missing Value Imputation</h2>
<p>We will now impute the missing values using the <a href="https://www.rdocumentation.org/packages/mice/versions/3.15.0/topics/mice">mice package</a> in R</p>
<div class="cell">

</div>
<p>Let’s compare the distribution of imputed data and the original data:</p>

<img data-src="FifaWageSlides_part_files/figure-revealjs/fig-imputeddistr-1.png" width="960" class="r-stretch quarto-figure-center"><p class="caption">Figure&nbsp;2: Distribution of the imputed data v/s original data</p><p><a href="#/fig-imputeddistr">Figure&nbsp;2</a> shows the distribution of imputed data (red) over the distribution of the original data (blue). We see that they follow similar distributions. So, the imputation of our missing values hasn’t adversely affected our data distribution.</p>
<div class="cell">

</div>
</section></section>
<section>
<section id="feature-engineering" class="title-slide slide level1 center">
<h1>Feature Engineering</h1>

</section>
<section id="creating-new-features" class="slide level2 smaller">
<h2>Creating New Features</h2>
<p>Based on the FIFA version, club_joined date and club_contract_valid_until date, we can create the following 2 features: <span style="color:seagreen"><strong><em>contract_left_days</em></strong></span> and <span style="color:seagreen"><strong><em>days_at_club</em></strong></span></p>
<div class="cell">
<div class="cell-output-display">

<table class=" lightable-material lightable-striped lightable-hover" style="font-family: &quot;Source Sans Pro&quot;, helvetica, sans-serif; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> fifa_version </th>
   <th style="text-align:left;"> club_joined </th>
   <th style="text-align:left;"> club_contract_valid_until </th>
   <th style="text-align:right;"> contract_left_days </th>
   <th style="text-align:right;"> days_at_club </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> 2018-01-01 </td>
   <td style="text-align:left;"> 2009-07-01 </td>
   <td style="text-align:left;"> 2021-01-01 </td>
   <td style="text-align:right;"> 1096 </td>
   <td style="text-align:right;"> 3106 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2018-01-01 </td>
   <td style="text-align:left;"> 2004-07-01 </td>
   <td style="text-align:left;"> 2018-01-01 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 4932 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2018-01-01 </td>
   <td style="text-align:left;"> 2011-07-01 </td>
   <td style="text-align:left;"> 2021-01-01 </td>
   <td style="text-align:right;"> 1096 </td>
   <td style="text-align:right;"> 2376 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2018-01-01 </td>
   <td style="text-align:left;"> 2014-07-11 </td>
   <td style="text-align:left;"> 2021-01-01 </td>
   <td style="text-align:right;"> 1096 </td>
   <td style="text-align:right;"> 1270 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2018-01-01 </td>
   <td style="text-align:left;"> 2017-08-03 </td>
   <td style="text-align:left;"> 2022-01-01 </td>
   <td style="text-align:right;"> 1461 </td>
   <td style="text-align:right;"> 151 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2018-01-01 </td>
   <td style="text-align:left;"> 2014-07-01 </td>
   <td style="text-align:left;"> 2021-01-01 </td>
   <td style="text-align:right;"> 1096 </td>
   <td style="text-align:right;"> 1280 </td>
  </tr>
</tbody>
</table>

</div>
</div>
</section>
<section id="transforming-features" class="slide level2 smaller">
<h2>Transforming Features</h2>
<p>The features: body_type and work_rate have string values with mixed types. That can be formatted to generate cleaner categories:</p>
<div class="cell">

</div>
<p>The features of the data have the following types now:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   18796 obs. of  13 variables:
 $ value_eur               : num  9.55e+07 1.05e+08 6.10e+07 9.70e+07 1.23e+08 9.20e+07 5.20e+07 7.70e+07 7.90e+07 9.05e+07 ...
 $ wage_eur                : num  575000 575000 225000 500000 275000 350000 300000 275000 325000 300000 ...
 $ age                     : int  32 30 31 30 25 28 31 29 27 26 ...
 $ height_cm               : int  185 170 193 182 175 185 183 184 182 173 ...
 $ weight_kg               : int  80 72 92 86 68 79 75 87 78 76 ...
 $ league_name             : chr  "Spain Primera Division" "Spain Primera Division" "German 1. Bundesliga" "Spain Primera Division" ...
 $ preferred_foot          : chr  "Right" "Left" "Right" "Right" ...
 $ international_reputation: int  5 5 5 5 5 4 4 4 4 4 ...
 $ work_rate               : chr  "High" "Medium" "Medium" "High" ...
 $ body_type               : chr  "Unique" "Unique" "Normal" "Normal" ...
 $ release_clause_eur      : num  1.96e+08 2.15e+08 1.01e+08 1.99e+08 2.37e+08 ...
 $ contract_left_days      : num  1096 0 1096 1096 1461 ...
 $ days_at_club            : num  3106 4932 2376 1270 151 ...</code></pre>
</div>
</div>
<p>The features: league_name, preferred_foot, work_rate, body_type and international_reputation can be <em>converted to categorical type</em> to facilitate model fitting.</p>
<div class="cell">

</div>
</section>
<section id="train-test-split" class="slide level2">
<h2>Train-Test Split</h2>
<p>Now the data is ready for splitting into training (including validation) and testing datasets. The test dataset will be utilized later, after designing the models, for predicting the wage on out-of-sample data.</p>
<p>We will select 80% of the data for training, and keep 20% as unseen data for prediction.</p>
<div class="cell">

</div>
</section></section>
<section>
<section id="fitting-regression-models" class="title-slide slide level1 center">
<h1>Fitting Regression Models</h1>
<div class="fragment fade-left">
<p>Now we will model the dependence of Wage on other covariates. The models will be used to make prediction on the unseen data later.</p>
</div>
</section>
<section id="linear-model" class="slide level2">
<h2>Linear Model</h2>
<div class="cell">
<style type="text/css">
.main-container {
    max-width: 600px !important;
}

pre {
  max-height: 500px !important;
  overflow-y: auto !important;
  overflow-x: scroll !important;
}
pre code {
  white-space: pre
}
</style>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = wage_eur ~ ., data = player_df)

Residuals:
    Min      1Q  Median      3Q     Max 
-245650   -5724     245    4662  239997 

Coefficients:
                                        Estimate Std. Error t value Pr(&gt;|t|)
(Intercept)                            3.358e+04  5.074e+03   6.618 3.76e-11
value_eur                              6.064e-04  5.247e-05  11.558  &lt; 2e-16
age                                    8.992e+02  4.068e+01  22.106  &lt; 2e-16
height_cm                             -2.098e+02  3.783e+01  -5.545 2.99e-08
weight_kg                              8.909e+01  3.729e+01   2.389  0.01691
league_nameFrench Ligue 1             -2.036e+04  5.156e+02 -39.482  &lt; 2e-16
league_nameGerman 1. Bundesliga       -1.924e+04  5.262e+02 -36.563  &lt; 2e-16
league_nameHolland Eredivisie         -2.437e+04  5.734e+02 -42.501  &lt; 2e-16
league_nameItalian Serie A            -1.546e+04  5.243e+02 -29.490  &lt; 2e-16
league_namePortuguese Liga ZON SAGRES -2.914e+04  5.580e+02 -52.228  &lt; 2e-16
league_nameSpain Primera Division     -1.959e+04  5.148e+02 -38.061  &lt; 2e-16
preferred_footRight                    9.119e+01  3.310e+02   0.275  0.78296
international_reputation2              7.478e+03  4.528e+02  16.515  &lt; 2e-16
international_reputation3              2.394e+04  7.522e+02  31.824  &lt; 2e-16
international_reputation4              8.325e+04  1.555e+03  53.552  &lt; 2e-16
international_reputation5              1.511e+05  3.942e+03  38.330  &lt; 2e-16
work_rateLow                          -7.862e+02  7.879e+02  -0.998  0.31837
work_rateMedium                       -1.011e+03  3.361e+02  -3.009  0.00263
body_typeNormal                       -2.519e+02  3.325e+02  -0.758  0.44872
body_typeStocky                       -9.086e+02  7.346e+02  -1.237  0.21616
body_typeUnique                       -6.258e+03  1.489e+03  -4.204 2.64e-05
release_clause_eur                     6.297e-04  2.981e-05  21.122  &lt; 2e-16
contract_left_days                     3.008e+00  3.665e-01   8.206 2.47e-16
days_at_club                           1.964e+00  1.984e-01   9.895  &lt; 2e-16
                                         
(Intercept)                           ***
value_eur                             ***
age                                   ***
height_cm                             ***
weight_kg                             *  
league_nameFrench Ligue 1             ***
league_nameGerman 1. Bundesliga       ***
league_nameHolland Eredivisie         ***
league_nameItalian Serie A            ***
league_namePortuguese Liga ZON SAGRES ***
league_nameSpain Primera Division     ***
preferred_footRight                      
international_reputation2             ***
international_reputation3             ***
international_reputation4             ***
international_reputation5             ***
work_rateLow                             
work_rateMedium                       ** 
body_typeNormal                          
body_typeStocky                          
body_typeUnique                       ***
release_clause_eur                    ***
contract_left_days                    ***
days_at_club                          ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 17620 on 15012 degrees of freedom
Multiple R-squared:  0.7947,    Adjusted R-squared:  0.7944 
F-statistic:  2527 on 23 and 15012 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
<p><span style="font-size: 2rem;">We see that the features: weight_kg, preferred_foot, work_rate and body_type have low signficance in modelling the wage.</span></p>
</section>
<section id="linear-model-1" class="slide level2 smaller">
<h2>Linear Model</h2>
<p><span style="font-size: 1.2rem;">So, let’s try a linear model without these factors:</span></p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = wage_eur ~ value_eur + age + height_cm + league_name + 
    international_reputation + release_clause_eur + contract_left_days + 
    days_at_club, data = player_df)

Residuals:
    Min      1Q  Median      3Q     Max 
-247655   -5686     213    4625  239475 

Coefficients:
                                        Estimate Std. Error t value Pr(&gt;|t|)
(Intercept)                            2.941e+04  4.055e+03   7.252 4.32e-13
value_eur                              5.426e-04  4.995e-05  10.862  &lt; 2e-16
age                                    9.239e+02  3.947e+01  23.406  &lt; 2e-16
height_cm                             -1.581e+02  2.214e+01  -7.139 9.85e-13
league_nameFrench Ligue 1             -2.039e+04  5.153e+02 -39.562  &lt; 2e-16
league_nameGerman 1. Bundesliga       -1.910e+04  5.239e+02 -36.456  &lt; 2e-16
league_nameHolland Eredivisie         -2.446e+04  5.697e+02 -42.932  &lt; 2e-16
league_nameItalian Serie A            -1.543e+04  5.237e+02 -29.473  &lt; 2e-16
league_namePortuguese Liga ZON SAGRES -2.924e+04  5.555e+02 -52.645  &lt; 2e-16
league_nameSpain Primera Division     -1.969e+04  5.131e+02 -38.381  &lt; 2e-16
international_reputation2              7.662e+03  4.517e+02  16.962  &lt; 2e-16
international_reputation3              2.388e+04  7.520e+02  31.756  &lt; 2e-16
international_reputation4              8.285e+04  1.551e+03  53.404  &lt; 2e-16
international_reputation5              1.484e+05  3.881e+03  38.237  &lt; 2e-16
release_clause_eur                     6.558e-04  2.927e-05  22.404  &lt; 2e-16
contract_left_days                     3.194e+00  3.651e-01   8.747  &lt; 2e-16
days_at_club                           1.969e+00  1.984e-01   9.922  &lt; 2e-16
                                         
(Intercept)                           ***
value_eur                             ***
age                                   ***
height_cm                             ***
league_nameFrench Ligue 1             ***
league_nameGerman 1. Bundesliga       ***
league_nameHolland Eredivisie         ***
league_nameItalian Serie A            ***
league_namePortuguese Liga ZON SAGRES ***
league_nameSpain Primera Division     ***
international_reputation2             ***
international_reputation3             ***
international_reputation4             ***
international_reputation5             ***
release_clause_eur                    ***
contract_left_days                    ***
days_at_club                          ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 17640 on 15019 degrees of freedom
Multiple R-squared:  0.7943,    Adjusted R-squared:  0.7941 
F-statistic:  3624 on 16 and 15019 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
<p><span style="font-size: 1.3rem;">We see that the F-statistic has <strong><em>improved from 2527 to 3624</em></strong>, while Adjusted R-squared <strong><em>reduced from 0.7944 to 0.7941</em></strong>.</span></p>
<p><span style="font-size: 1.3rem;">We see that the F-statistic has improved substantially, without much reduction in Adjusted R-squared value. So the model got better.</span></p>
</section>
<section id="generalized-linear-models" class="slide level2 smaller">
<h2>Generalized Linear Models</h2>
<p><span style="font-size: 1.8rem;">Since we are working with currency data (wage, value and release_clause), we cannot assume a normal distribution of the covariates (since they are non-negative and dense at low values). Let us plot the univariate distributions:</span></p>

<img data-src="FifaWageSlides_part_files/figure-revealjs/unnamed-chunk-17-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="generalized-linear-models-1" class="slide level2 smaller">
<h2>Generalized Linear Models</h2>
<p><span style="font-size: 1.8rem;">Since we are working with currency data (wage, value and release_clause), we cannot assume a normal distribution of the covariates (since they are non-negative and dense at low values). Let us plot the univariate distributions:</span></p>

<img data-src="FifaWageSlides_part_files/figure-revealjs/unnamed-chunk-18-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="generalized-linear-models-2" class="slide level2 smaller">
<h2>Generalized Linear Models</h2>
<p><span style="font-size: 1.8rem;">We can see that the currency variables (wage_eur, value_eur and release_clause_eur) are highly positively skewed, and far from normally distributed. Thus we should view them in a log-scale. The distribution after log transformation are shown below:</span></p>
<div class="cell">

</div>

<img data-src="FifaWageSlides_part_files/figure-revealjs/fig-gaussian_transf-1.png" width="864" class="r-stretch quarto-figure-center"><p class="caption">Figure&nbsp;3: Log-tranformed Distribution</p><p>We can see that the positive skewness has been damped, and the log transformed variables are approximately Gaussian.</p>
</section>
<section id="gamma-distributed-response" class="slide level2 smaller">
<h2>Gamma Distributed Response</h2>
<p><span style="font-size:1.5rem;">If we log-transform the response variable (Wage), we will no longer be able to compare the model to the previous linear models where non-transformed Wage was used. It will also introduce extra bias due to nonlinear back-transformation with exponential function. Thus, we will keep the response variable in the original form, and rather fit a GLM with a family corresponding to its distribution.</span></p>
<p><br></p>

<img data-src="FifaWageSlides_part_files/figure-revealjs/fig-wagegamma-1.png" width="960" class="r-stretch quarto-figure-center"><p class="caption">Figure&nbsp;4: Distribution of Wage, fitted with a Gamma density function</p></section>
<section id="glm-with-gamma-family" class="slide level2 smaller">
<h2>GLM with Gamma Family</h2>
<p>Thus, we will fit a GLM with Gamma family, and with a log-link.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:  glm(formula = wage_eur ~ value_log + age + height_cm + league_name + 
    international_reputation + release_clause_log + contract_left_days + 
    days_at_club, family = Gamma(link = "log"), data = player_df)

Coefficients:
                          (Intercept)                              value_log  
                            2.653e-01                              2.161e-01  
                                  age                              height_cm  
                            6.967e-02                             -4.365e-03  
            league_nameFrench Ligue 1        league_nameGerman 1. Bundesliga  
                           -6.132e-01                             -5.229e-01  
        league_nameHolland Eredivisie             league_nameItalian Serie A  
                           -1.239e+00                             -4.113e-01  
league_namePortuguese Liga ZON SAGRES      league_nameSpain Primera Division  
                           -1.484e+00                             -6.742e-01  
            international_reputation2              international_reputation3  
                            3.867e-02                              1.404e-01  
            international_reputation4              international_reputation5  
                            4.545e-01                              6.118e-01  
                   release_clause_log                     contract_left_days  
                            3.651e-01                              6.394e-05  
                         days_at_club  
                            4.784e-05  

Degrees of Freedom: 15035 Total (i.e. Null);  15019 Residual
Null Deviance:      22430 
Residual Deviance: 2562     AIC: 300900</code></pre>
</div>
</div>
</section>
<section id="glm-with-gamma-family-1" class="slide level2 smaller">
<h2>GLM with Gamma Family</h2>
<p>Thus, we will fit a GLM with Gamma family, and with a log-link.</p>
<p>If we compare the AIC of the GLM with the previous Linear Model, we see: <br></p>
<ul>
<li>AIC of GLM (with Gamma family and log link) : 300907 <br></li>
<li>AIC of Linear Model 2 : 336730.2</li>
</ul>
<div class="fragment fade-up">
<p>Thus, the GLM has given a better result (lower AIC).</p>
</div>
</section>
<section id="aic-based-step-function-for-variable-selection" class="slide level2">
<h2><span style="font-size:3rem;">AIC-based step function for variable selection</span></h2>
<p><span style="font-size:2rem;">We can see if the variables we initially omitted after linear model, may be added to the GLM, to reduce the AIC even further. We will start off with only value_log as predictor, and keep adding / removing covariates that reduce AIC.</span></p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Start:  AIC=317023.6
wage_eur ~ value_log

                           Df Deviance    AIC
+ league_name               6   4142.2 311766
+ age                       1   5725.2 314546
+ international_reputation  4   6394.8 315733
+ days_at_club              1   6710.5 316284
+ contract_left_days        1   6912.4 316639
+ weight_kg                 1   6977.4 316754
+ release_clause_log        1   7010.9 316813
+ height_cm                 1   7096.9 316965
+ body_type                 3   7113.1 316997
+ work_rate                 2   7116.4 317001
+ preferred_foot            1   7129.4 317022
&lt;none&gt;                          7131.5 317024
- value_log                 1  22426.9 343985

Step:  AIC=308375.2
wage_eur ~ value_log + league_name

                           Df Deviance    AIC
+ age                       1   2712.7 303756
+ international_reputation  4   3692.8 306930
+ contract_left_days        1   3927.5 307683
+ days_at_club              1   3943.1 307734
+ weight_kg                 1   4061.6 308117
+ body_type                 3   4103.2 308255
+ release_clause_log        1   4132.4 308345
+ height_cm                 1   4134.2 308351
+ work_rate                 2   4136.2 308360
+ preferred_foot            1   4141.1 308374
&lt;none&gt;                          4142.2 308375
- league_name               6   7131.5 318027
- value_log                 1  14989.6 343442

Step:  AIC=301775.6
wage_eur ~ value_log + league_name + age

                           Df Deviance    AIC
+ release_clause_log        1   2651.0 301468
+ international_reputation  4   2655.9 301498
+ days_at_club              1   2692.9 301678
+ height_cm                 1   2700.6 301717
+ weight_kg                 1   2707.9 301754
+ work_rate                 2   2707.9 301755
+ body_type                 3   2707.6 301756
+ contract_left_days        1   2710.0 301764
+ preferred_foot            1   2712.0 301774
&lt;none&gt;                          2712.7 301776
- age                       1   4142.2 308954
- league_name               6   5725.2 316895
- value_log                 1  12195.5 349404

Step:  AIC=301421.4
wage_eur ~ value_log + league_name + age + release_clause_log

                           Df Deviance    AIC
+ international_reputation  4   2593.8 301136
+ days_at_club              1   2628.2 301307
+ height_cm                 1   2639.9 301367
+ body_type                 3   2643.6 301389
+ work_rate                 2   2646.0 301400
+ weight_kg                 1   2646.9 301402
+ contract_left_days        1   2649.7 301417
+ preferred_foot            1   2650.1 301419
&lt;none&gt;                          2651.0 301421
- value_log                 1   2681.4 301576
- release_clause_log        1   2712.7 301736
- age                       1   4132.4 309023
- league_name               6   5485.3 315957

Step:  AIC=301092.2
wage_eur ~ value_log + league_name + age + release_clause_log + 
    international_reputation

                           Df Deviance    AIC
+ days_at_club              1   2581.1 301026
+ height_cm                 1   2582.9 301036
+ weight_kg                 1   2589.2 301069
+ work_rate                 2   2589.1 301071
+ contract_left_days        1   2591.1 301080
+ body_type                 3   2591.5 301086
+ preferred_foot            1   2593.0 301090
&lt;none&gt;                          2593.8 301092
- value_log                 1   2618.9 301224
- international_reputation  4   2651.0 301389
- release_clause_log        1   2655.9 301421
- age                       1   3674.9 306858
- league_name               6   5331.1 315685

Step:  AIC=301017.8
wage_eur ~ value_log + league_name + age + release_clause_log + 
    international_reputation + days_at_club

                           Df Deviance    AIC
+ height_cm                 1   2570.5 300963
+ contract_left_days        1   2573.7 300980
+ work_rate                 2   2575.6 300993
+ weight_kg                 1   2576.7 300996
+ body_type                 3   2578.8 301012
+ preferred_foot            1   2580.1 301015
&lt;none&gt;                          2581.1 301018
- days_at_club              1   2593.8 301084
- value_log                 1   2604.4 301141
- international_reputation  4   2628.2 301263
- release_clause_log        1   2645.4 301361
- age                       1   3577.6 306368
- league_name               6   5221.2 315186

Step:  AIC=300956.3
wage_eur ~ value_log + league_name + age + release_clause_log + 
    international_reputation + days_at_club + height_cm

                           Df Deviance    AIC
+ contract_left_days        1   2562.0 300912
+ work_rate                 2   2568.2 300948
+ body_type                 3   2568.3 300951
+ preferred_foot            1   2570.0 300956
+ weight_kg                 1   2570.0 300956
&lt;none&gt;                          2570.5 300956
- height_cm                 1   2581.1 301011
- days_at_club              1   2582.9 301021
- value_log                 1   2594.3 301083
- international_reputation  4   2617.6 301202
- release_clause_log        1   2633.7 301295
- age                       1   3575.0 306366
- league_name               6   5221.2 315226

Step:  AIC=300907
wage_eur ~ value_log + league_name + age + release_clause_log + 
    international_reputation + days_at_club + height_cm + contract_left_days

                           Df Deviance    AIC
+ work_rate                 2   2559.9 300900
+ body_type                 3   2559.7 300901
+ preferred_foot            1   2561.5 300907
+ weight_kg                 1   2561.6 300907
&lt;none&gt;                          2562.0 300907
- contract_left_days        1   2570.5 300951
- height_cm                 1   2573.7 300969
- days_at_club              1   2579.4 300999
- value_log                 1   2585.2 301031
- international_reputation  4   2610.0 301159
- release_clause_log        1   2622.4 301232
- age                       1   3515.4 306058
- league_name               6   5205.3 315181

Step:  AIC=300898.4
wage_eur ~ value_log + league_name + age + release_clause_log + 
    international_reputation + days_at_club + height_cm + contract_left_days + 
    work_rate

                           Df Deviance    AIC
+ body_type                 3   2557.7 300893
+ weight_kg                 1   2559.4 300898
&lt;none&gt;                          2559.9 300898
+ preferred_foot            1   2559.5 300899
- work_rate                 2   2562.0 300906
- contract_left_days        1   2568.2 300942
- height_cm                 1   2568.3 300942
- days_at_club              1   2577.9 300994
- value_log                 1   2582.5 301019
- international_reputation  4   2607.6 301149
- release_clause_log        1   2620.6 301225
- age                       1   3510.4 306039
- league_name               6   5190.7 315121

Step:  AIC=300891.3
wage_eur ~ value_log + league_name + age + release_clause_log + 
    international_reputation + days_at_club + height_cm + contract_left_days + 
    work_rate + body_type

                           Df Deviance    AIC
+ weight_kg                 1   2556.3 300886
&lt;none&gt;                          2557.7 300891
+ preferred_foot            1   2557.4 300892
- body_type                 3   2559.9 300897
- work_rate                 2   2559.7 300898
- contract_left_days        1   2566.1 300935
- height_cm                 1   2566.1 300935
- days_at_club              1   2575.7 300987
- value_log                 1   2580.3 301011
- international_reputation  4   2601.4 301120
- release_clause_log        1   2617.5 301213
- age                       1   3495.2 305970
- league_name               6   5155.1 314957

Step:  AIC=300885
wage_eur ~ value_log + league_name + age + release_clause_log + 
    international_reputation + days_at_club + height_cm + contract_left_days + 
    work_rate + body_type + weight_kg

                           Df Deviance    AIC
&lt;none&gt;                          2556.3 300885
+ preferred_foot            1   2556.0 300885
- weight_kg                 1   2557.7 300890
- work_rate                 2   2558.4 300892
- body_type                 3   2559.4 300896
- height_cm                 1   2563.6 300923
- contract_left_days        1   2564.7 300928
- days_at_club              1   2574.3 300981
- value_log                 1   2578.7 301005
- international_reputation  4   2599.3 301110
- release_clause_log        1   2616.3 301208
- age                       1   3457.1 305770
- league_name               6   5132.2 314847</code></pre>
</div>
</div>
</section>
<section id="aic-based-step-function-for-variable-selection-1" class="slide level2">
<h2><span style="font-size:3rem;">AIC-based step function for variable selection</span></h2>
<p><span style="font-size:1.5rem;">In the final model, only preferred_foot is the omitted variable. We include all other features in the GLM. Thus we form the next GLM:</span></p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:  glm(formula = wage_eur ~ value_log + age + height_cm + league_name + 
    international_reputation + release_clause_log + contract_left_days + 
    days_at_club + weight_kg + work_rate + body_type, family = Gamma(link = "log"), 
    data = player_df)

Coefficients:
                          (Intercept)                              value_log  
                            4.161e-01                              2.137e-01  
                                  age                              height_cm  
                            6.968e-02                             -5.831e-03  
            league_nameFrench Ligue 1        league_nameGerman 1. Bundesliga  
                           -6.110e-01                             -5.223e-01  
        league_nameHolland Eredivisie             league_nameItalian Serie A  
                           -1.232e+00                             -4.096e-01  
league_namePortuguese Liga ZON SAGRES      league_nameSpain Primera Division  
                           -1.477e+00                             -6.686e-01  
            international_reputation2              international_reputation3  
                            3.760e-02                              1.412e-01  
            international_reputation4              international_reputation5  
                            4.504e-01                              6.046e-01  
                   release_clause_log                     contract_left_days  
                            3.651e-01                              6.326e-05  
                         days_at_club                              weight_kg  
                            4.859e-05                              2.469e-03  
                         work_rateLow                        work_rateMedium  
                           -4.343e-02                             -2.540e-02  
                      body_typeNormal                        body_typeStocky  
                           -3.286e-02                             -1.957e-02  
                      body_typeUnique  
                           -2.678e-02  

Degrees of Freedom: 15035 Total (i.e. Null);  15013 Residual
Null Deviance:      22430 
Residual Deviance: 2556     AIC: 300900</code></pre>
</div>
</div>
<p><span style="font-size:1.4rem;">AIC of the updated GLM: <strong><em>300885</em></strong> (earlier GLM’s AIC: 300907 )</span></p>
</section>
<section id="random-forest-model" class="slide level2 smaller">
<h2>Random Forest Model</h2>
<p><span style="font-size:1.5rem;">In the next stage, we will try to fit a random forest regression model for Wage analysis.</span><br> <span style="font-size:1.5rem;">The code is as follows:</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>model.rf1 <span class="ot">&lt;-</span> <span class="fu">randomForest</span>(wage_eur <span class="sc">~</span> value_log <span class="sc">+</span> age <span class="sc">+</span> height_cm <span class="sc">+</span> league_name <span class="sc">+</span></span>
<span id="cb10-2"><a href="#cb10-2"></a>                            international_reputation <span class="sc">+</span> release_clause_log <span class="sc">+</span></span>
<span id="cb10-3"><a href="#cb10-3"></a>                            contract_left_days <span class="sc">+</span> days_at_club, <span class="at">data=</span>player_df, <span class="at">ntree=</span><span class="dv">100</span>,</span>
<span id="cb10-4"><a href="#cb10-4"></a>                          <span class="at">keep.forest=</span><span class="cn">TRUE</span>, <span class="at">importance=</span><span class="cn">TRUE</span>)</span>
<span id="cb10-5"><a href="#cb10-5"></a>model.rf1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
 randomForest(formula = wage_eur ~ value_log + age + height_cm +      league_name + international_reputation + release_clause_log +      contract_left_days + days_at_club, data = player_df, ntree = 100,      keep.forest = TRUE, importance = TRUE) 
               Type of random forest: regression
                     Number of trees: 100
No. of variables tried at each split: 2

          Mean of squared residuals: 199624051
                    % Var explained: 86.79</code></pre>
</div>
</div>
</section>
<section id="hyperparameter-optimization-of-random-forest-model" class="slide level2">
<h2><span class="smaller">Hyperparameter Optimization of Random Forest Model</span></h2>
<p>One main hyperparameter we can tune in the Random Forest Model is <strong><em>mtry</em></strong>: the number of variables to randomly sample as candidates at each split. By default, it is set as p/3 where p is the number of features used in the model. <br><br></p>
<p>The best value of mtry can be found by finding the mtry corresponding to the minimum of OOB Error.</p>
</section>
<section id="hyperparameter-optimization-of-random-forest-model-1" class="slide level2">
<h2><span style="font-size:2.5rem;">Hyperparameter Optimization of Random Forest Model</span></h2>
<p><span style="font-size:1.8rem;">Tuning the mtry value to find the optimum for minimizing OOBError:</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>bestmtry <span class="ot">&lt;-</span> <span class="fu">tuneRF</span>(player_df,player_df<span class="sc">$</span>wage_eur,<span class="at">stepFactor =</span> <span class="fl">1.2</span>,</span>
<span id="cb12-2"><a href="#cb12-2"></a>                    <span class="at">improve =</span> <span class="fl">0.01</span>, <span class="at">trace=</span>T, <span class="at">plot=</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="FifaWageSlides_part_files/figure-revealjs/fig-rftuner-1.png" width="960" class="r-stretch quarto-figure-center"><p class="caption">Figure&nbsp;5: Random Forest tuning for best mtry value</p><p><span style="font-size:1.8rem;">We see that best mtry value is 8.</span></p>
</section>
<section id="hyperparameter-optimization-of-random-forest-model-2" class="slide level2">
<h2><span style="font-size:2.5rem;">Hyperparameter Optimization of Random Forest Model</span></h2>
<p><span style="font-size:1.8rem;">Using that in the improved Random Forest model:</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>model.rf2 <span class="ot">&lt;-</span> <span class="fu">randomForest</span>(wage_eur <span class="sc">~</span> value_log <span class="sc">+</span> age <span class="sc">+</span> height_cm <span class="sc">+</span> league_name <span class="sc">+</span></span>
<span id="cb13-2"><a href="#cb13-2"></a>                            international_reputation <span class="sc">+</span> release_clause_log <span class="sc">+</span></span>
<span id="cb13-3"><a href="#cb13-3"></a>                            contract_left_days <span class="sc">+</span> days_at_club, <span class="at">data=</span>player_df, <span class="at">ntree=</span><span class="dv">100</span>,</span>
<span id="cb13-4"><a href="#cb13-4"></a>                            <span class="at">mtry=</span><span class="dv">8</span>, <span class="at">keep.forest=</span><span class="cn">TRUE</span>, <span class="at">importance=</span><span class="cn">TRUE</span>)</span>
<span id="cb13-5"><a href="#cb13-5"></a>model.rf2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
 randomForest(formula = wage_eur ~ value_log + age + height_cm +      league_name + international_reputation + release_clause_log +      contract_left_days + days_at_club, data = player_df, ntree = 100,      mtry = 8, keep.forest = TRUE, importance = TRUE) 
               Type of random forest: regression
                     Number of trees: 100
No. of variables tried at each split: 8

          Mean of squared residuals: 198204509
                    % Var explained: 86.88</code></pre>
</div>
</div>
</section>
<section id="visualizing-variable-importance" class="slide level2 smaller">
<h2>Visualizing variable importance</h2>
<p><span style="font-size:1.5rem;">The importance of variables used in the random forest model is visualized below:</span></p>

<img data-src="FifaWageSlides_part_files/figure-revealjs/fig-featureimp-1.png" width="864" class="r-stretch quarto-figure-center"><p class="caption">Figure&nbsp;6: Variable importance</p><div class="fragment fade-up">
<p><span style="font-size:1.5rem;">Here we see 2 different metrics for assessing Variable Importance:</span></p>
<p><span style="font-size:1.5rem;"><em>%IncMSE</em> : Increase in MSE of predictions when the variable is permuted <em>IncNodePurity</em> : Average increase in node purity on splitting using the variable</span></p>
<p><span style="font-size:1.5rem;">%IncMSE is the more relevant metric, and we see that league_name plays most important role in the wage : permutations (shuffling) of the league_name can result in highest changes of Wage. That is followed by the international_reputation.</span></p>
</div>
</section>
<section id="xgboost-model" class="slide level2 smaller">
<h2>XGBoost Model</h2>
<p>Next we use XGBoost (eXtreme Gradient Boosting) algorithm to design a model for Wage prediction. We will tune the parameters: max.depth and nrounds of the gradient boosting algorithm using grid search, and evaluating MAPE on a validation dataset. The model with best parameter choices are selected for evaluating on the test set later.</p>
<div class="fragment fade-up">
<p>We convert the categorical variables to dummy variables since the XGBoost model requires a data matrix with numerical features. This is achieved with the following code:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>dummy_player_df <span class="ot">&lt;-</span> <span class="fu">dummy_cols</span>(player_df, <span class="at">select_columns =</span> <span class="fu">c</span>(<span class="st">'league_name'</span>, <span class="st">'international_reputation'</span>, <span class="st">'work_rate'</span>,</span>
<span id="cb15-2"><a href="#cb15-2"></a>                                                            <span class="st">'body_type'</span>, <span class="st">'preferred_foot'</span>), <span class="at">remove_selected_columns =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="xgboost-model-1" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">XGBoost Model</h2>
<p><span style="font-size:2rem;">Now we keep aside a portion of the data for validation, and generate data matrices for XGBoost:</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb16-1" class="hljs-ln-code"><a href="#cb16-1"></a>sample <span class="ot">&lt;-</span> <span class="fu">sample.int</span>(<span class="at">n =</span> <span class="fu">nrow</span>(dummy_player_df), <span class="at">size =</span> <span class="fu">floor</span>(.<span class="dv">80</span><span class="sc">*</span><span class="fu">nrow</span>(dummy_player_df)), <span class="at">replace =</span> F)</span>
<span id="cb16-2" class="hljs-ln-code"><a href="#cb16-2"></a>train_xgb <span class="ot">&lt;-</span> dummy_player_df[sample, ]</span>
<span id="cb16-3" class="hljs-ln-code"><a href="#cb16-3"></a>val_xgb  <span class="ot">&lt;-</span> dummy_player_df[<span class="sc">-</span>sample, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="xgboost-model-2" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">XGBoost Model</h2>
<p><span style="font-size:2rem;">Now we keep aside a portion of the data for validation, and generate data matrices for XGBoost:</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb17-1" class="hljs-ln-code"><a href="#cb17-1"></a>sample <span class="ot">&lt;-</span> <span class="fu">sample.int</span>(<span class="at">n =</span> <span class="fu">nrow</span>(dummy_player_df), <span class="at">size =</span> <span class="fu">floor</span>(.<span class="dv">80</span><span class="sc">*</span><span class="fu">nrow</span>(dummy_player_df)), <span class="at">replace =</span> F)</span>
<span id="cb17-2" class="hljs-ln-code"><a href="#cb17-2"></a>train_xgb <span class="ot">&lt;-</span> dummy_player_df[sample, ]</span>
<span id="cb17-3" class="hljs-ln-code"><a href="#cb17-3"></a>val_xgb  <span class="ot">&lt;-</span> dummy_player_df[<span class="sc">-</span>sample, ]</span>
<span id="cb17-4" class="hljs-ln-code"><a href="#cb17-4"></a></span>
<span id="cb17-5" class="hljs-ln-code"><a href="#cb17-5"></a>train_xgb_x <span class="ot">&lt;-</span> <span class="fu">data.matrix</span>(train_xgb[, <span class="sc">-</span><span class="fu">which</span>(<span class="fu">names</span>(train_xgb) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">'value_eur'</span>, <span class="st">'wage_eur'</span>, <span class="st">'wage_log'</span>, <span class="st">'release_clause_eur'</span>))])</span>
<span id="cb17-6" class="hljs-ln-code"><a href="#cb17-6"></a>train_xgb_y <span class="ot">&lt;-</span> train_xgb<span class="sc">$</span>wage_eur</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="xgboost-model-3" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">XGBoost Model</h2>
<p><span style="font-size:2rem;">Now we keep aside a portion of the data for validation, and generate data matrices for XGBoost:</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb18-1" class="hljs-ln-code"><a href="#cb18-1"></a>sample <span class="ot">&lt;-</span> <span class="fu">sample.int</span>(<span class="at">n =</span> <span class="fu">nrow</span>(dummy_player_df), <span class="at">size =</span> <span class="fu">floor</span>(.<span class="dv">80</span><span class="sc">*</span><span class="fu">nrow</span>(dummy_player_df)), <span class="at">replace =</span> F)</span>
<span id="cb18-2" class="hljs-ln-code"><a href="#cb18-2"></a>train_xgb <span class="ot">&lt;-</span> dummy_player_df[sample, ]</span>
<span id="cb18-3" class="hljs-ln-code"><a href="#cb18-3"></a>val_xgb  <span class="ot">&lt;-</span> dummy_player_df[<span class="sc">-</span>sample, ]</span>
<span id="cb18-4" class="hljs-ln-code"><a href="#cb18-4"></a></span>
<span id="cb18-5" class="hljs-ln-code"><a href="#cb18-5"></a>train_xgb_x <span class="ot">&lt;-</span> <span class="fu">data.matrix</span>(train_xgb[, <span class="sc">-</span><span class="fu">which</span>(<span class="fu">names</span>(train_xgb) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">'value_eur'</span>, <span class="st">'wage_eur'</span>, <span class="st">'wage_log'</span>, <span class="st">'release_clause_eur'</span>))])</span>
<span id="cb18-6" class="hljs-ln-code"><a href="#cb18-6"></a>train_xgb_y <span class="ot">&lt;-</span> train_xgb<span class="sc">$</span>wage_eur</span>
<span id="cb18-7" class="hljs-ln-code"><a href="#cb18-7"></a></span>
<span id="cb18-8" class="hljs-ln-code"><a href="#cb18-8"></a>val_xgb_x <span class="ot">&lt;-</span> <span class="fu">data.matrix</span>(val_xgb[, <span class="sc">-</span><span class="fu">which</span>(<span class="fu">names</span>(val_xgb) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">'value_eur'</span>, <span class="st">'wage_eur'</span>, <span class="st">'wage_log'</span>, <span class="st">'release_clause_eur'</span>))])</span>
<span id="cb18-9" class="hljs-ln-code"><a href="#cb18-9"></a>val_xgb_y <span class="ot">&lt;-</span> val_xgb<span class="sc">$</span>wage_eur</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="xgboost-model-4" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">XGBoost Model</h2>
<p><span style="font-size:2rem;">Now we keep aside a portion of the data for validation, and generate data matrices for XGBoost:</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb19-1" class="hljs-ln-code"><a href="#cb19-1"></a>sample <span class="ot">&lt;-</span> <span class="fu">sample.int</span>(<span class="at">n =</span> <span class="fu">nrow</span>(dummy_player_df), <span class="at">size =</span> <span class="fu">floor</span>(.<span class="dv">80</span><span class="sc">*</span><span class="fu">nrow</span>(dummy_player_df)), <span class="at">replace =</span> F)</span>
<span id="cb19-2" class="hljs-ln-code"><a href="#cb19-2"></a>train_xgb <span class="ot">&lt;-</span> dummy_player_df[sample, ]</span>
<span id="cb19-3" class="hljs-ln-code"><a href="#cb19-3"></a>val_xgb  <span class="ot">&lt;-</span> dummy_player_df[<span class="sc">-</span>sample, ]</span>
<span id="cb19-4" class="hljs-ln-code"><a href="#cb19-4"></a></span>
<span id="cb19-5" class="hljs-ln-code"><a href="#cb19-5"></a>train_xgb_x <span class="ot">&lt;-</span> <span class="fu">data.matrix</span>(train_xgb[, <span class="sc">-</span><span class="fu">which</span>(<span class="fu">names</span>(train_xgb) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">'value_eur'</span>, <span class="st">'wage_eur'</span>, <span class="st">'wage_log'</span>, <span class="st">'release_clause_eur'</span>))])</span>
<span id="cb19-6" class="hljs-ln-code"><a href="#cb19-6"></a>train_xgb_y <span class="ot">&lt;-</span> train_xgb<span class="sc">$</span>wage_eur</span>
<span id="cb19-7" class="hljs-ln-code"><a href="#cb19-7"></a></span>
<span id="cb19-8" class="hljs-ln-code"><a href="#cb19-8"></a>val_xgb_x <span class="ot">&lt;-</span> <span class="fu">data.matrix</span>(val_xgb[, <span class="sc">-</span><span class="fu">which</span>(<span class="fu">names</span>(val_xgb) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">'value_eur'</span>, <span class="st">'wage_eur'</span>, <span class="st">'wage_log'</span>, <span class="st">'release_clause_eur'</span>))])</span>
<span id="cb19-9" class="hljs-ln-code"><a href="#cb19-9"></a>val_xgb_y <span class="ot">&lt;-</span> val_xgb<span class="sc">$</span>wage_eur</span>
<span id="cb19-10" class="hljs-ln-code"><a href="#cb19-10"></a></span>
<span id="cb19-11" class="hljs-ln-code"><a href="#cb19-11"></a>xgb_train <span class="ot">=</span> <span class="fu">xgb.DMatrix</span>(<span class="at">data =</span> train_xgb_x, <span class="at">label =</span> train_xgb_y)</span>
<span id="cb19-12" class="hljs-ln-code"><a href="#cb19-12"></a>xgb_val <span class="ot">=</span> <span class="fu">xgb.DMatrix</span>(<span class="at">data =</span> val_xgb_x, <span class="at">label =</span> val_xgb_y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="tuning-xgboost-model" class="slide level2 smaller">
<h2>Tuning XGBoost Model</h2>
<p>To tune the <strong><em>max.depth</em></strong> and <strong><em>nrounds</em></strong> parameters of thr XGBoost model, we create a function: grid_search_xgb_val to display the MAPE for a particular (max.depth, nrounds) input:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>grid_search_xgb_val <span class="ot">&lt;-</span> <span class="cf">function</span>(depth, rounds){</span>
<span id="cb20-2"><a href="#cb20-2"></a>  model_xgboost <span class="ot">=</span> <span class="fu">xgboost</span>(<span class="at">data =</span> xgb_train, <span class="at">max.depth =</span> depth, <span class="at">nrounds =</span> rounds, <span class="at">verbose =</span> <span class="dv">0</span>)</span>
<span id="cb20-3"><a href="#cb20-3"></a>  pred_y <span class="ot">=</span> <span class="fu">predict</span>(model_xgboost, xgb_val)</span>
<span id="cb20-4"><a href="#cb20-4"></a>  <span class="fu">cat</span>(<span class="fu">sprintf</span>(<span class="st">"Depth:%d   Rounds:%d   MAPE:%f</span><span class="sc">\n</span><span class="st">"</span>, depth, rounds, <span class="fu">MAPE</span>(pred_y, val_xgb_y)<span class="sc">*</span><span class="dv">100</span>))</span>
<span id="cb20-5"><a href="#cb20-5"></a>  <span class="fu">return</span>(<span class="fu">list</span>(<span class="st">"depth"</span> <span class="ot">=</span> depth, <span class="st">"rounds"</span> <span class="ot">=</span> rounds, <span class="st">"mape"</span> <span class="ot">=</span> <span class="fu">MAPE</span>(pred_y, val_xgb_y)<span class="sc">*</span><span class="dv">100</span>))</span>
<span id="cb20-6"><a href="#cb20-6"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="tuning-xgboost-model-1" class="slide level2 smaller">
<h2>Tuning XGBoost Model</h2>
<p><span style="font-size:1.5rem;">Performing grid search with various values of max.depth and nrounds:</span></p>
<div class="cell columns column-output-location">
<div class="column">
<div class="sourceCode cell-code" id="cb21" data-code-line-numbers="1-11|1-3|4-5|6|7|8-10|11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>opt_depth <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb21-2"><a href="#cb21-2"></a>opt_rounds <span class="ot">&lt;-</span> <span class="dv">40</span></span>
<span id="cb21-3"><a href="#cb21-3"></a>min_mape <span class="ot">&lt;-</span> <span class="dv">1000</span></span>
<span id="cb21-4"><a href="#cb21-4"></a><span class="cf">for</span> (depth <span class="cf">in</span> <span class="fu">seq</span>(<span class="dv">3</span>,<span class="dv">12</span>,<span class="at">by=</span><span class="dv">1</span>)) {</span>
<span id="cb21-5"><a href="#cb21-5"></a>  <span class="cf">for</span> (rounds <span class="cf">in</span> <span class="fu">seq</span>(<span class="dv">40</span>,<span class="dv">160</span>, <span class="at">by=</span><span class="dv">20</span>)) {</span>
<span id="cb21-6"><a href="#cb21-6"></a>    result <span class="ot">&lt;-</span> <span class="fu">grid_search_xgb_val</span>(depth,rounds)</span>
<span id="cb21-7"><a href="#cb21-7"></a>    <span class="cf">if</span>(result<span class="sc">$</span>mape <span class="sc">&lt;</span> min_mape) {</span>
<span id="cb21-8"><a href="#cb21-8"></a>      min_mape <span class="ot">&lt;-</span> result<span class="sc">$</span>mape</span>
<span id="cb21-9"><a href="#cb21-9"></a>      opt_depth <span class="ot">&lt;-</span> result<span class="sc">$</span>depth</span>
<span id="cb21-10"><a href="#cb21-10"></a>      opt_rounds <span class="ot">&lt;-</span> result<span class="sc">$</span>rounds</span>
<span id="cb21-11"><a href="#cb21-11"></a>      <span class="fu">cat</span>(<span class="fu">sprintf</span>(<span class="st">"New record:-- Depth:%d   Rounds:%d   MAPE:%f</span><span class="sc">\n</span><span class="st">"</span>, opt_depth, opt_rounds, min_mape))</span>
<span id="cb21-12"><a href="#cb21-12"></a>    }</span>
<span id="cb21-13"><a href="#cb21-13"></a>  }</span>
<span id="cb21-14"><a href="#cb21-14"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column fragment">
<div class="cell-output cell-output-stdout">
<pre><code>Depth:3   Rounds:40   MAPE:45.020380
New record:-- Depth:3   Rounds:40   MAPE:45.020380
Depth:3   Rounds:60   MAPE:44.356035
New record:-- Depth:3   Rounds:60   MAPE:44.356035
Depth:3   Rounds:80   MAPE:44.062728
New record:-- Depth:3   Rounds:80   MAPE:44.062728
Depth:3   Rounds:100   MAPE:41.720931
New record:-- Depth:3   Rounds:100   MAPE:41.720931
Depth:3   Rounds:120   MAPE:41.947089
Depth:3   Rounds:140   MAPE:41.319777
New record:-- Depth:3   Rounds:140   MAPE:41.319777
Depth:3   Rounds:160   MAPE:41.013442
New record:-- Depth:3   Rounds:160   MAPE:41.013442
Depth:4   Rounds:40   MAPE:39.406280
New record:-- Depth:4   Rounds:40   MAPE:39.406280
Depth:4   Rounds:60   MAPE:38.347885
New record:-- Depth:4   Rounds:60   MAPE:38.347885
Depth:4   Rounds:80   MAPE:37.476787
New record:-- Depth:4   Rounds:80   MAPE:37.476787
Depth:4   Rounds:100   MAPE:37.517248
Depth:4   Rounds:120   MAPE:37.615807
Depth:4   Rounds:140   MAPE:37.527248
Depth:4   Rounds:160   MAPE:37.358606
New record:-- Depth:4   Rounds:160   MAPE:37.358606
Depth:5   Rounds:40   MAPE:36.493160
New record:-- Depth:5   Rounds:40   MAPE:36.493160
Depth:5   Rounds:60   MAPE:36.506876
Depth:5   Rounds:80   MAPE:36.434234
New record:-- Depth:5   Rounds:80   MAPE:36.434234
Depth:5   Rounds:100   MAPE:36.602232
Depth:5   Rounds:120   MAPE:36.998485
Depth:5   Rounds:140   MAPE:37.323993
Depth:5   Rounds:160   MAPE:37.729600
Depth:6   Rounds:40   MAPE:35.701894
New record:-- Depth:6   Rounds:40   MAPE:35.701894
Depth:6   Rounds:60   MAPE:35.348273
New record:-- Depth:6   Rounds:60   MAPE:35.348273
Depth:6   Rounds:80   MAPE:35.531947
Depth:6   Rounds:100   MAPE:36.131182
Depth:6   Rounds:120   MAPE:36.740621
Depth:6   Rounds:140   MAPE:37.241437
Depth:6   Rounds:160   MAPE:37.640350
Depth:7   Rounds:40   MAPE:35.621537
Depth:7   Rounds:60   MAPE:35.874247
Depth:7   Rounds:80   MAPE:36.549695
Depth:7   Rounds:100   MAPE:36.832719
Depth:7   Rounds:120   MAPE:36.930043
Depth:7   Rounds:140   MAPE:37.140745
Depth:7   Rounds:160   MAPE:37.285426
Depth:8   Rounds:40   MAPE:35.675616
Depth:8   Rounds:60   MAPE:36.648693
Depth:8   Rounds:80   MAPE:37.082722
Depth:8   Rounds:100   MAPE:37.406055
Depth:8   Rounds:120   MAPE:37.879689
Depth:8   Rounds:140   MAPE:38.203989
Depth:8   Rounds:160   MAPE:38.671443
Depth:9   Rounds:40   MAPE:35.674975
Depth:9   Rounds:60   MAPE:36.219128
Depth:9   Rounds:80   MAPE:36.537620
Depth:9   Rounds:100   MAPE:36.976302
Depth:9   Rounds:120   MAPE:37.139351
Depth:9   Rounds:140   MAPE:37.423246
Depth:9   Rounds:160   MAPE:37.767735
Depth:10   Rounds:40   MAPE:35.121622
New record:-- Depth:10   Rounds:40   MAPE:35.121622
Depth:10   Rounds:60   MAPE:35.741637
Depth:10   Rounds:80   MAPE:36.379630
Depth:10   Rounds:100   MAPE:36.685486
Depth:10   Rounds:120   MAPE:36.872402
Depth:10   Rounds:140   MAPE:37.133483
Depth:10   Rounds:160   MAPE:37.124267
Depth:11   Rounds:40   MAPE:34.911245
New record:-- Depth:11   Rounds:40   MAPE:34.911245
Depth:11   Rounds:60   MAPE:35.263404
Depth:11   Rounds:80   MAPE:35.488997
Depth:11   Rounds:100   MAPE:35.733378
Depth:11   Rounds:120   MAPE:35.981452
Depth:11   Rounds:140   MAPE:36.126925
Depth:11   Rounds:160   MAPE:36.163749
Depth:12   Rounds:40   MAPE:34.679958
New record:-- Depth:12   Rounds:40   MAPE:34.679958
Depth:12   Rounds:60   MAPE:35.066651
Depth:12   Rounds:80   MAPE:35.273275
Depth:12   Rounds:100   MAPE:35.403185
Depth:12   Rounds:120   MAPE:35.452218
Depth:12   Rounds:140   MAPE:35.484310
Depth:12   Rounds:160   MAPE:35.503255</code></pre>
</div>
</div>
</div>
<div class="fragment fade-up">
<p><span style="font-size:1.5rem;">From the console output, we see that the minimum MAPE (34.6799577) is obtained for max.depth = 12 and nrounds = 40. Thus, we retain the XGBoost model with those hyperparameters.</span></p>
</div>
<div class="cell">

</div>
</section></section>
<section>
<section id="wage-prediction" class="title-slide slide level1 center">
<h1>Wage Prediction</h1>
<div class="fragment fade-left">
<p>Using the models we have created, we will predict the Wage on unseen data (unseen during model fitting), and compare MAPE: The Mean Absolute Percentage Error.</p>
</div>
<div class="cell">

</div>
</section>
<section id="baseline-model-prediction" class="slide level2">
<h2>Baseline Model Prediction</h2>
<p>To get a minimum performance (baseline) for wage prediction, we can use the mean wage from training dataset, and use that as prediction in the test data.</p>
<p>Mean wage from training data :26970.73. We can calculate the MAPE using the following code:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="fu">MAPE</span>(<span class="fu">mean</span>(player_df<span class="sc">$</span>wage_eur), test<span class="sc">$</span>wage_eur)<span class="sc">*</span><span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 421.7984</code></pre>
</div>
</div>
<div class="fragment fade-left">
<p>Thus, the baseline MAPE is 421.798. Any model we propose should have MAPE less than this, to be considered useful.</p>
</div>
</section>
<section id="linear-models-prediction" class="slide level2">
<h2>Linear Models Prediction</h2>
<p>Using the first linear model (where we used all covariates), we obtain the following MAPE:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a><span class="fu">MAPE</span>(<span class="fu">predict</span>(model.lm1, test), test<span class="sc">$</span>wage_eur)<span class="sc">*</span><span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 93.49752</code></pre>
</div>
</div>
<p>Using the second linear model (with only significant features selected), we obtain the following MAPE:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a><span class="fu">MAPE</span>(<span class="fu">predict</span>(model.lm2, test), test<span class="sc">$</span>wage_eur)<span class="sc">*</span><span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 93.25372</code></pre>
</div>
</div>
<div class="fragment fade-left">
<p>We see that both linear models have more than 80% MAPE. That is not a very good performance.</p>
</div>
</section>
<section id="generalized-linear-models-prediction" class="slide level2 smaller">
<h2>Generalized Linear Models Prediction</h2>
<p>Using the first glm (without AIC-based feature selection), we get the following MAPE:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a><span class="fu">MAPE</span>(<span class="fu">predict</span>(model.glm1, test, <span class="at">type =</span> <span class="st">"response"</span>), test<span class="sc">$</span>wage_eur)<span class="sc">*</span><span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 39.50448</code></pre>
</div>
</div>
<p>Using the second glm (with AIC-based feature selection), we get the following MAPE:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a><span class="fu">MAPE</span>(<span class="fu">predict</span>(model.glm2, test, <span class="at">type =</span> <span class="st">"response"</span>), test<span class="sc">$</span>wage_eur)<span class="sc">*</span><span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 39.5349</code></pre>
</div>
</div>
<div class="fragment fade-left">
<p><span style="font-size:1.5rem;">We see a drastic improvement in performance using the GLM model, since it used Gamma distribution to model the Wage, with a log-link. This indeed helped in improving the model.</span></p>
</div>
</section>
<section id="random-forest-model-prediction" class="slide level2">
<h2>Random Forest Model Prediction</h2>
<p>Using the first random forest model (without hyperparameter optimization), we get the following MAPE:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a><span class="fu">MAPE</span>(<span class="fu">predict</span>(model.rf1, test), test<span class="sc">$</span>wage_eur)<span class="sc">*</span><span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 38.32406</code></pre>
</div>
</div>
<p>Using the random forest model after hyperparameter optimization, we get the following MAPE:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a><span class="fu">MAPE</span>(<span class="fu">predict</span>(model.rf2, test), test<span class="sc">$</span>wage_eur)<span class="sc">*</span><span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 35.45257</code></pre>
</div>
</div>
</section>
<section id="xgboost-model-prediction" class="slide level2">
<h2>XGBoost Model Prediction</h2>
<p>We create dummy variables for categorical features in the test dataset, to be able to use the XGBoost model.</p>
<div class="cell">

</div>
<p>Using the XGBoost model for wage prediction, we get the following MAPE:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a><span class="fu">MAPE</span>(<span class="fu">predict</span>(model.xgboost, xgb_test), test<span class="sc">$</span>wage_eur)<span class="sc">*</span><span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 36.65892</code></pre>
</div>
</div>
</section>
<section id="analysis-conclusion" class="slide level2">
<h2>Analysis Conclusion</h2>
<p>Out of all the models we evaluated on the test set; the Random Forest model (after hyperparameter tuning) gave the best MAPE result. The scatter-plot of predicted wage v/s actual wage on unseen data is as shown below:</p>

<img data-src="FifaWageSlides_part_files/figure-revealjs/fig-predictscatter-1.png" width="960" class="r-stretch quarto-figure-center"><p class="caption">Figure&nbsp;7: Scatter-plot of Predicted v/s Actual Wage with Random Forest Model</p></section></section>
<section>
<section id="detour-reproduction-phase" class="title-slide slide level1 center">
<h1>Detour: Reproduction Phase</h1>

</section>
<section id="multiverse-analysis-using-tidy-models" class="slide level2">
<h2>Multiverse Analysis Using tidy-models</h2>
<p>Code run status: <b><span style="color:DarkGreen">Good</span></b><br> <span style="font-size: 1.7rem;">Ran smooth; Generated output plots of estimated effect of skin-tone on getting a red-card and associated p-value of the hypothesis; for different model configurations.</span></p>
<p><img data-src="presentation_files/Ensemble1.png" width="1000" height="300"></p>
</section>
<section id="multiverse-analysis-using-tidy-models-1" class="slide level2">
<h2>Multiverse Analysis Using tidy-models</h2>
<p>Code run status: <b><span style="color:DarkGreen">Good</span></b><br> <span style="font-size: 1.7rem;">Ran smooth; Generated output plots of estimated effect of skin-tone on getting a red-card and associated p-value of the hypothesis; for different model configurations.</span></p>
<p><img data-src="presentation_files/Ensemble2.png" width="1000" height="300"></p>

<aside><div>
<p>Issue: Reference plots / output data not provided. So, couldn’t validate reproducibility of results.</p>
</div></aside></section></section>
<section>
<section id="back-to-quarto" class="title-slide slide level1 center">
<h1>Back to Quarto</h1>

</section>
<section id="reproducibility-aspect-of-quarto" class="slide level2 smaller">
<h2>Reproducibility Aspect of Quarto</h2>
<div class="fragment fade-in">
<p>Quarto combines code, output, plots, and regular text into one coherent document.<br><br></p>
</div>
<div class="fragment fade-in">
<p>Perfect for reproducing analysis results, since the author’s <b>course of actions</b> in his degrees of freedom (during data pre-processing, feature engineering, feature selection, model selection, hyperparameter tuning) are <b>all recorded</b> in the document generated by Quarto.<br><br></p>
</div>
<div class="fragment fade-in">
<p>Since Quarto can generate reproducible reports, it can <b>avoid having to copy-paste figures</b> into a Word document, and generating a PDF out of it, which could be hard to reproduce by other analysts.<br></p>
</div>
</section>
<section id="reproducibility-aspect-of-quarto-1" class="slide level2 smaller">
<h2>Reproducibility Aspect of Quarto</h2>
<h3 id="dynamic-reports">Dynamic Reports</h3>
<p>Ability to generate dynamic reports: where the outputs, plots, and even text description could be generated automatically by the code (without hard-coding) gives freedom to the analyst to test the analysis with different settings / data and examine results reproducibility.<br><br></p>
<div class="fragment fade-in">
<p>The document generated by this analysis (FIFA-Wage) is hosted <a href="https://htmlpreview.github.io/?https://github.com/shyamshankarhr/fifa-quarto/blob/master/sample_output/FifaWage.html">here</a>.</p>
</div>
</section>
<section id="discussion" class="slide level2">
<h2>Discussion</h2>
<div class="fragment fade-in">
<p>Does enabling Dynamic-document creation help or affect Reproducibility?</p>
<div>
<ul>
<li class="fragment"><p>Do you think too much dynamicity of reports (like entire description) could have adverse effects on knowledge transfer?</p></li>
<li class="fragment"><p>Would it be better to keep text descriptions static, so that results reproducibility can be validated?</p></li>
</ul>
</div>
</div>
<div class="footer footer-default">
<p>FIFA Wage Prediction with Quarto</p>
</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="FifaWageSlides_part_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="FifaWageSlides_part_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="FifaWageSlides_part_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="FifaWageSlides_part_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="FifaWageSlides_part_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="FifaWageSlides_part_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="FifaWageSlides_part_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="FifaWageSlides_part_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="FifaWageSlides_part_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="FifaWageSlides_part_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="FifaWageSlides_part_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        target: function(trigger) {
          return trigger.previousElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto-reveal',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>